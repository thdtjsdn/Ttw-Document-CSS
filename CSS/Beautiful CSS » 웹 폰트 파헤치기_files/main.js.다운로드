jQuery(function($) {
    
    // 롤링 카운터
    $(".counter-header").rollingCounter({
	    animate : false
	});
	  
	// 사이드바
	$('.sidebar-main.sidebar')
	  .sidebar({
	    transition: 'push',
	    dimPage: false
	  });

    $('.sidebar-main.sidebar').first()
        .sidebar('attach events', '.sidebar-open', 'show');

    // 문서 개요
    var toc = $("#toc").tocify({
        context: "#wrap-post",
		selectors: "h2,h3,h4,h5",
		theme: "bootstrap"
    }).data("toc-tocify");
	  
	$('.ui.sticky')
	  .sticky({
	    offset : 64,
	    context: '#site-content',
	    silent: true,
	  	setSize: false
	  });
	
	$('.ui.accordion')
	  .accordion({
		  exclusive: true
	  });
	  
	$('.ui.embed').embed();
	  
	// 메시지 창 닫기
	$('.message .close')
	  .on('click', function() {
	    $(this)
	      .closest('.message')
	      .transition('fade')
	    ;
	  });
	
	// 드롭다운
	$('.ui.dropdown')
	  .dropdown();
	
	// 팝업
	$('.popup-default')
	  .popup();
	  
	// 갤러리 마우스오버
	$('article.bowl .img-wrap').hover(function(){
		var obj = $(this).parents('article.bowl');
		if ($(obj).hasClass('expanded')) {
			$(obj).removeClass('expanded');
			$(".bo-list-options",obj).animate({ bottom:"-38px" }, 200 );
		} else {
			$(obj).addClass('expanded');
			$(".bo-list-options",obj).animate({ bottom:"0" }, 200 );
		}
		return false;
	});
	
	// 예제 애니메이션 작동
	$('.ct-play').click(function(){
		var obj = $(this).parents('div.ct-samp');
		if ($(obj).hasClass('play')) {
			$(obj).removeClass('play');
		} else {
			$(obj).addClass('play');
		}
		return false;
	});

	$('div.ct-samp.hover').hover(function(){
		var obj = $(this).parents('.ct-ex');
		if ($(obj).hasClass('play')) {
			$(obj).removeClass('play');
		} else {
			$(obj).addClass('play');
		}
		return false;
	});

	var controller = new ScrollMagic.Controller();
	
	var nav_op_01 = TweenMax.to("#nav-main", 0.3, {borderColor: "rgba(236, 236, 236, 1)"}), 		// 네비게이션 하단 테두리 생성
		nav_op_02 = TweenMax.to("body.home .status-header-main .value", 0.5, {opacity: "1"});		// 카운터 Fade-In
	
	new ScrollMagic.Scene({triggerElement: "#header-main", triggerHook: "onLeave", offset: -64}) 	// 헤더 분기에 따른 애니메이션
		.setTween([nav_op_01, nav_op_02])
		.on("leave", function (e) {
			TweenMax.to("body.home .status-header-main .value", 0.5, {opacity: "1"})
		})
		.addTo(controller);

	/********** 반응형 스크립트 **********/
	enquire
	.register("screen and (min-width:1280px)", { // 1272px 이상
		match : function() {
			
			$( "body" ).addClass( "wide" );
	    
	    },
	    unmatch : function() {
		    $( "body" ).removeClass( "wide" );
	    }
		
	})
	.register("screen and (min-width:1146px)", { // 1146px 이상
		match : function() {
			
			$( "body" ).addClass( "desktop" );
	    
	    },
	    unmatch : function() {
		    $( "body" ).removeClass( "desktop" );
	    }
		
	})
	.register("screen and (max-width:1145px)", { // 1145px 이하
		match : function() {
			
			$( "body" ).addClass( "tablet" );
					
		},
		unmatch : function() {
			$( "body" ).removeClass( "tablet" );
		}
		
	})
	.register("screen and (max-width:990px)", { // 990px 이하
		match : function() {
			$( "body" ).removeClass( "tablet" );
			$( "body" ).addClass( "phone" );
		
		},
		unmatch : function() {
			$( "body" ).removeClass( "phone" );
			$( "body" ).addClass( "tablet" );
		}
		
	});
	
});